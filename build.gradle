plugins {
    id "com.palantir.docker-run" version "0.35.0"
    id "com.nocwriter.runsql" version "1.0.3"
    id 'java'
}

group 'com.ui'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.postgresql:postgresql:42.6.0'
}

dockerRun{
    name 'postgesql-docker'
    image 'postgres'
    ports '5532:5432'
    env 'POSTGRES_USER':'ui_test', 'POSTGRES_PASSWORD':'ui_test'
}

tasks.register('createTable', RunSQL) {
    config {
        username = 'ui_test'
        password = 'ui_test'
        url = 'jdbc:postgresql://localhost:5532/ui_test'
        driverClassName = 'org.postgresql.Driver'
        scriptFile = 'src/main/resources/db/createUsersTable.sql'
    }
}